<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ShopLite | Cart</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Roboto', sans-serif; }
    h1, h2, h3, .nav-link { font-family: 'Poppins', sans-serif; }
    .btn, .price { font-family: 'Montserrat', sans-serif; }
  </style>
</head>
<body class="bg-[#f9fafb] text-[#1a1b41]">

  <!-- Navbar -->
  <header class="bg-[#1a1b41] text-white p-4 flex justify-between items-center">
    <a href="index.html" class="text-2xl font-bold"><span class="text-[#baff29]">Shop</span>Lite</a>
    <a href="index.html" 
       class="bg-[#baff29] text-[#1a1b41] px-4 py-2 rounded-lg font-semibold hover:bg-[#a2e020] transition">
       ‚Üê Continue Shopping
    </a>
  </header>

  <!-- Cart Section -->
  <main class="container mx-auto py-12 px-6">
    <h1 class="text-3xl font-bold mb-6">Your Cart</h1>

    <div id="cart-container" class="space-y-6">
      <!-- Cart items injected here -->
    </div>

    <!-- Order Summary -->
    <div id="cart-summary" class="mt-10 p-6 bg-white rounded-xl shadow-lg hidden max-w-md ml-auto">
      <h2 class="text-2xl font-bold mb-4">Order Summary</h2>
      <div class="flex justify-between mb-2 text-gray-700">
        <span>Subtotal:</span>
        <span>$<span id="subtotal">0.00</span></span>
      </div>
      <div class="flex justify-between font-bold text-lg border-t pt-2">
        <span>Total:</span>
        <span>$<span id="total">0.00</span></span>
      </div>
      <a href="checkout.html" 
         class="block text-center mt-6 bg-[#3bc14a] text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition">
         Proceed to Checkout ‚Üí
      </a>
    </div>

    <p id="empty-cart" class="text-center text-gray-500 mt-12">üõí Your cart is empty. Go add some items!</p>
  </main>

  <script>
    const cartContainer = document.getElementById("cart-container");
    const subtotalEl = document.getElementById("subtotal");
    const totalEl = document.getElementById("total");
    const cartSummary = document.getElementById("cart-summary");
    const emptyCart = document.getElementById("empty-cart");

    function loadCart() {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      cartContainer.innerHTML = '';

      if (cart.length === 0) {
        cartSummary.classList.add("hidden");
        emptyCart.classList.remove("hidden");
        return;
      }

      emptyCart.classList.add("hidden");
      cartSummary.classList.remove("hidden");

      cart.forEach(item => {
        const div = document.createElement("div");
        div.className = "flex flex-col md:flex-row items-start md:items-center bg-white rounded-xl shadow-md p-4 gap-6";

        div.innerHTML = `
          <img src="${item.image}" alt="${item.title}" class="w-28 h-28 object-contain rounded-lg border self-center md:self-auto">
          <div class="flex-1">
            <h3 class="font-semibold text-lg">${item.title}</h3>
            <p class="text-gray-600">$${item.price}</p>
            <div class="mt-3 flex items-center gap-3 flex-wrap">
              <button class="px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded-md qty-btn" data-id="${item.id}" data-action="minus">-</button>
              <span id="qty-${item.id}" class="font-semibold">${item.qty}</span>
              <button class="px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded-md qty-btn" data-id="${item.id}" data-action="plus">+</button>
              <button class="ml-0 md:ml-6 text-red-600 font-medium hover:text-red-800 remove-btn" data-id="${item.id}">Remove</button>
            </div>
          </div>
          <p class="font-bold text-lg md:self-auto self-end mt-3 md:mt-0">
            $<span id="item-total-${item.id}">${(item.price * item.qty).toFixed(2)}</span>
          </p>
        `;

        cartContainer.appendChild(div);
      });

      updateTotals();
      attachEventListeners();
    }

    function attachEventListeners() {
      // Update quantity
      document.querySelectorAll(".qty-btn").forEach(btn => {
        btn.addEventListener("click", () => {
          let cart = JSON.parse(localStorage.getItem("cart")) || [];
          const id = parseInt(btn.dataset.id);
          const action = btn.dataset.action;
          const idx = cart.findIndex(i => i.id === id);

          if (idx >= 0) {
            if (action === "plus") cart[idx].qty++;
            if (action === "minus" && cart[idx].qty > 1) cart[idx].qty--;
            localStorage.setItem("cart", JSON.stringify(cart));
            loadCart();
          }
        });
      });

      // Remove item
      document.querySelectorAll(".remove-btn").forEach(btn => {
        btn.addEventListener("click", () => {
          let cart = JSON.parse(localStorage.getItem("cart")) || [];
          const id = parseInt(btn.dataset.id);
          cart = cart.filter(i => i.id !== id);
          localStorage.setItem("cart", JSON.stringify(cart));
          loadCart();
        });
      });
    }

    function updateTotals() {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      let subtotal = cart.reduce((sum, i) => sum + i.price * i.qty, 0);
      subtotalEl.textContent = subtotal.toFixed(2);
      totalEl.textContent = subtotal.toFixed(2);

      // Update individual item totals
      cart.forEach(item => {
        const el = document.getElementById(`item-total-${item.id}`);
        if (el) el.textContent = (item.price * item.qty).toFixed(2);
      });
    }

    document.addEventListener("DOMContentLoaded", loadCart);
  </script>

</body>
</html>
